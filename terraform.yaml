  provider "google" {
    project = "	rakesh-478806" 
    region = "us-central1"
  }

  resource "google_compute_network" "vpc_1" {
    name = "my-vpc1"
    auto_create_subnetworks = false 
  }

  resource "google_compute_subnetwork" "subnet_1" {
    name = "subnet-11"
    region = "us-central1"
    ip_cidr_range = "10.0.3.0/24"
    network = google_compute_network.vpc_1.id 
  }

  resource "google_compute_firewall" "firewall_1" {
    name = "my-firewall-1"
    network = google_compute_network.vpc_1.id
    priority = 1000


    allow {
        protocol = "tcp"
        ports = ["80", "22"]
    }
    source_ranges = ["0.0.0.0/0"]
  }

  resource "google_compute_instance" "vm_1" {
    name = "my-vm"
    zone = "us-central-a"
    machine_type = "e2-medium"
    boot_disk {
      initialize_params {
        image = "debian-cloud/debian-12"
      }
    }

    network_interface {
      network = google_compute_subnetwork.subnet_1.id 
      access_config {}
    }
  }
